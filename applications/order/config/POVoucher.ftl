<#setting number_format="0.00"><TALLYMESSAGE>	<VOUCHER VCHTYPE="${orderHeader.voucherType?if_exists}" ACTION="Create">		<DATE>${orderHeader.orderDate?if_exists?string("yyyyMMdd")}</DATE>		<#if orderHeader.formToIssueDate?exists>		<CSTFORMISSUEDATE>${orderHeader.formToIssueDate?string("yyyyMMdd")}</CSTFORMISSUEDATE>		</#if>		<#if "Sales"=voucherType>		<#if orderHeader.formToIssueDate?exists>		<CSTFORMRECVDATE>${orderHeader.formToIssueDate?string("yyyyMMdd")}</CSTFORMRECVDATE>		</#if>		</#if>		<VOUCHERTYPENAME>${orderHeader.voucherType?if_exists}</VOUCHERTYPENAME>		<REFERENCE>${orderHeader.orderName?if_exists?html}</REFERENCE>		<PARTYLEDGERNAME>${partyGlAccount.accountName?if_exists?html}</PARTYLEDGERNAME>		<#if "Purchase"=voucherType>		<#if orderHeader.formToIssue?exists>		<CSTFORMISSUETYPE>${orderHeader.formToIssue?if_exists}</CSTFORMISSUETYPE>		<CSTFORMISSUENUMBER>${orderHeader.formToIssueFormNo?if_exists}</CSTFORMISSUENUMBER>		<CSTFORMISSUESERIESNUM>${orderHeader.formToIssueSeriesNo?if_exists}</CSTFORMISSUESERIESNUM>		</#if>		<#if orderHeader.formToReceive?exists>		<CSTFORMRECVTYPE>${orderHeader.formToReceive?if_exists}</CSTFORMRECVTYPE>		<CSTFORMRECVNUMBER>${orderHeader.formToReceiveFormNo?if_exists}</CSTFORMRECVNUMBER>		<CSTFORMRECVSERIESNUM>${orderHeader.formToReceiveSeriesNo?if_exists}</CSTFORMRECVSERIESNUM>		</#if>		</#if>		<#if "Sales"=voucherType>		<#if orderHeader.formToIssue?exists>		<CSTFORMRECVTYPE>${orderHeader.formToIssue?if_exists}</CSTFORMRECVTYPE>		<CSTFORMRECVNUMBER>${orderHeader.formToIssueFormNo?if_exists}</CSTFORMRECVNUMBER>		<CSTFORMRECVSERIESNUM>${orderHeader.formToIssueSeriesNo?if_exists}</CSTFORMRECVSERIESNUM>		</#if>		<#if orderHeader.formToReceive?exists>		<CSTFORMISSUETYPE>${orderHeader.formToReceive?if_exists}</CSTFORMISSUETYPE>		<CSTFORMISSUENUMBER>${orderHeader.formToReceiveFormNo?if_exists}</CSTFORMISSUENUMBER>		<CSTFORMISSUESERIESNUM>${orderHeader.formToReceiveSeriesNo?if_exists}</CSTFORMISSUESERIESNUM>		</#if>		</#if>		<FBTPAYMENTTYPE>Default</FBTPAYMENTTYPE>		<PERSISTEDVIEW>Invoice Voucher View</PERSISTEDVIEW>		<VCHGSTCLASS />		<DIFFACTUALQTY>No</DIFFACTUALQTY>		<AUDITED>No</AUDITED>		<FORJOBCOSTING>No</FORJOBCOSTING>		<ISOPTIONAL>No</ISOPTIONAL>		<EFFECTIVEDATE>${orderHeader.orderDate?string("yyyyMMdd")}</EFFECTIVEDATE>		<ISFORJOBWORKIN>No</ISFORJOBWORKIN>		<ALLOWCONSUMPTION>No</ALLOWCONSUMPTION>		<USEFORINTEREST>No</USEFORINTEREST>		<USEFORGAINLOSS>No</USEFORGAINLOSS>		<USEFORGODOWNTRANSFER>No</USEFORGODOWNTRANSFER>		<USEFORCOMPOUND>No</USEFORCOMPOUND>		<EXCISEOPENING>No</EXCISEOPENING>		<USEFORFINALPRODUCTION>No</USEFORFINALPRODUCTION>		<ISCANCELLED>No</ISCANCELLED>		<HASCASHFLOW>No</HASCASHFLOW>		<ISPOSTDATED>No</ISPOSTDATED>		<USETRACKINGNUMBER>No</USETRACKINGNUMBER>		<ISINVOICE>Yes</ISINVOICE>		<MFGJOURNAL>No</MFGJOURNAL>		<HASDISCOUNTS>No</HASDISCOUNTS>		<ASPAYSLIP>No</ASPAYSLIP>		<ISCOSTCENTRE>No</ISCOSTCENTRE>		<ISSTXNONREALIZEDVCH>No</ISSTXNONREALIZEDVCH>		<ISDELETED>No</ISDELETED>		<ASORIGINAL>No</ASORIGINAL>		<VCHISFROMSYNC>No</VCHISFROMSYNC>		<AUDITENTRIES.LIST>		</AUDITENTRIES.LIST>		<INVOICEDELNOTES.LIST>		</INVOICEDELNOTES.LIST>		<INVOICEORDERLIST.LIST>		</INVOICEORDERLIST.LIST>		<INVOICEINDENTLIST.LIST>		</INVOICEINDENTLIST.LIST>		<ATTENDANCEENTRIES.LIST>		</ATTENDANCEENTRIES.LIST>		<LEDGERENTRIES.LIST>			<LEDGERNAME>${partyGlAccount.accountName?if_exists?html}</LEDGERNAME>			<GSTCLASS />			<ISDEEMEDPOSITIVE><#if "Sales"=voucherType>Yes<#else>No</#if></ISDEEMEDPOSITIVE>			<LEDGERFROMITEM>No</LEDGERFROMITEM>			<REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>			<ISPARTYLEDGER>Yes</ISPARTYLEDGER>			<ISLASTDEEMEDPOSITIVE><#if "Sales"=voucherType>Yes<#else>No</#if></ISLASTDEEMEDPOSITIVE>			<#if "Sales"=voucherType>			<AMOUNT>${orderHeader.grandTotal?if_exists*-1}</AMOUNT>			<#else>			<AMOUNT>${orderHeader.grandTotal?if_exists}</AMOUNT>			</#if>			<BANKALLOCATIONS.LIST></BANKALLOCATIONS.LIST>			<INTERESTCOLLECTION.LIST></INTERESTCOLLECTION.LIST>			<BILLALLOCATIONS.LIST>				<NAME>${orderHeader.orderName?if_exists}</NAME>				<BILLTYPE>New Ref</BILLTYPE>				<TDSDEDUCTEEISSPECIALRATE>No</TDSDEDUCTEEISSPECIALRATE>				<#if "Sales"=voucherType>				<AMOUNT>${orderHeader.grandTotal?if_exists*-1}</AMOUNT>				<#else>				<AMOUNT>${orderHeader.grandTotal?if_exists}</AMOUNT>				</#if>				<INTERESTCOLLECTION.LIST></INTERESTCOLLECTION.LIST>			</BILLALLOCATIONS.LIST>			<INTERESTCOLLECTION.LIST>			</INTERESTCOLLECTION.LIST>			<AUDITENTRIES.LIST>			</AUDITENTRIES.LIST>			<TAXBILLALLOCATIONS.LIST>			</TAXBILLALLOCATIONS.LIST>			<TAXOBJECTALLOCATIONS.LIST>			</TAXOBJECTALLOCATIONS.LIST>			<TDSEXPENSEALLOCATIONS.LIST>			</TDSEXPENSEALLOCATIONS.LIST>			<VATSTATUTORYDETAILS.LIST>			</VATSTATUTORYDETAILS.LIST>			<COSTTRACKALLOCATIONS.LIST>			</COSTTRACKALLOCATIONS.LIST>		</LEDGERENTRIES.LIST>		<#if orderItemAdjs?has_content>		<#list orderItemAdjs as orderAdj>		<#if !orderAdj.rateOfTax?exists>		<LEDGERENTRIES.LIST>			<BASICRATEOFINVOICETAX.LIST TYPE="Number">				<BASICRATEOFINVOICETAX>0</BASICRATEOFINVOICETAX>			</BASICRATEOFINVOICETAX.LIST>			<ADDLALLOCTYPE />			<LEDGERNAME>${orderAdj.dutyLedger.accountName?if_exists?html}</LEDGERNAME>			<VOUCHERFBTCATEGORY />			<GSTCLASS />			<ISDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISDEEMEDPOSITIVE>			<LEDGERFROMITEM>No</LEDGERFROMITEM>			<ISPARTYLEDGER>No</ISPARTYLEDGER>			<ISLASTDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISLASTDEEMEDPOSITIVE>			<#if "Sales"=voucherType>			<AMOUNT>${orderAdj.amount}</AMOUNT>			<#else>			<AMOUNT>${orderAdj.amount*-1}</AMOUNT>			</#if>			<BANKALLOCATIONS.LIST>			</BANKALLOCATIONS.LIST>			<BILLALLOCATIONS.LIST>			</BILLALLOCATIONS.LIST>			<INTERESTCOLLECTION.LIST>			</INTERESTCOLLECTION.LIST>			<AUDITENTRIES.LIST></AUDITENTRIES.LIST>			<TAXBILLALLOCATIONS.LIST></TAXBILLALLOCATIONS.LIST>			<TAXOBJECTALLOCATIONS.LIST></TAXOBJECTALLOCATIONS.LIST>			<TDSEXPENSEALLOCATIONS.LIST></TDSEXPENSEALLOCATIONS.LIST>			<VATSTATUTORYDETAILS.LIST></VATSTATUTORYDETAILS.LIST>		</LEDGERENTRIES.LIST>		<#else>		<LEDGERENTRIES.LIST>			<#if orderAdj.rateOfTax?exists>			<BASICRATEOFINVOICETAX.LIST TYPE="Number">				<BASICRATEOFINVOICETAX>${orderAdj.rateOfTax}</BASICRATEOFINVOICETAX>			</BASICRATEOFINVOICETAX.LIST>			<#if orderAdj.dutyLedger.taxClassId?exists>			<#assign taxClass = delegator.findOne("TaxClassification",true,"taxClassId",orderAdj.dutyLedger.taxClassId)>			<TAXCLASSIFICATIONNAME>${taxClass.className?if_exists}</TAXCLASSIFICATIONNAME>			</#if>			</#if>			<ROUNDTYPE />			<LEDGERNAME>${orderAdj.dutyLedger.accountName?if_exists?html}</LEDGERNAME>			<#assign expenseLedger=orderAdj.dutyLedger.accountName/>			<GSTCLASS />			<ISDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISDEEMEDPOSITIVE>			<LEDGERFROMITEM>No</LEDGERFROMITEM>			<REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>			<ISPARTYLEDGER>No</ISPARTYLEDGER>			<ISLASTDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISLASTDEEMEDPOSITIVE>			<#if "Sales"=voucherType>			<AMOUNT>${orderAdj.amount}</AMOUNT>			<#else>			<AMOUNT>${orderAdj.amount*-1}</AMOUNT>			</#if>			<#if orderAdj.dutyLedger.taxClassId?exists>			<#assign vatAssessableValue=orderAdj.amount*100/orderAdj.rateOfTax>			<#if "Sales"=voucherType>			<VATASSESSABLEVALUE>${vatAssessableValue}</VATASSESSABLEVALUE>			<#else>			<VATASSESSABLEVALUE>${vatAssessableValue*-1}</VATASSESSABLEVALUE>			</#if>			</#if>			<BANKALLOCATIONS.LIST>			</BANKALLOCATIONS.LIST>			<BILLALLOCATIONS.LIST>			</BILLALLOCATIONS.LIST>			<INTERESTCOLLECTION.LIST>			</INTERESTCOLLECTION.LIST>			<AUDITENTRIES.LIST>			</AUDITENTRIES.LIST>			<TAXBILLALLOCATIONS.LIST>			</TAXBILLALLOCATIONS.LIST>			<#if orderAdj.dutyLedger.taxClassId?exists>			<TAXOBJECTALLOCATIONS.LIST>				<#assign taxClass = delegator.findOne("TaxClassification",true,"taxClassId",orderAdj.dutyLedger.taxClassId)>				<CATEGORY>${taxClass.className?if_exists?html}</CATEGORY>				<TAXTYPE>${orderAdj.dutyLedger.taxType?if_exists?html}</TAXTYPE>				<TAXNAME>${orderHeader.orderName?if_exists?html}</TAXNAME>				<PARTYLEDGER>${partyGlAccount.accountName?if_exists?html}</PARTYLEDGER>				<REFTYPE>New Ref</REFTYPE>				<ISOPTIONAL>No</ISOPTIONAL>				<ISPANVALID>No</ISPANVALID>				<ZERORATED>No</ZERORATED>				<EXEMPTED>No</EXEMPTED>				<ISSPECIALRATE>No</ISSPECIALRATE>				<ISDEDUCTNOW>No</ISDEDUCTNOW>				<ISPANNOTAVAILABLE>No</ISPANNOTAVAILABLE>				<AUDITENTRIES.LIST>				</AUDITENTRIES.LIST>				<#list orderAdj.subCategories as subCat>				<SUBCATEGORYALLOCATION.LIST>					<STOCKITEMNAME>${subCat.productName?if_exists?html}</STOCKITEMNAME>					<#if orderAdj.dutyLedger?exists>					<SUBCATEGORY>${orderAdj.dutyLedger.taxType?if_exists?html}</SUBCATEGORY>					<DUTYLEDGER>${orderAdj.dutyLedger.accountName?if_exists?html}</DUTYLEDGER>					</#if>					<SUBCATZERORATED>No</SUBCATZERORATED>					<SUBCATEXEMPTED>No</SUBCATEXEMPTED>					<SUBCATISSPECIALRATE>No</SUBCATISSPECIALRATE>					<TAXRATE>${orderAdj.rateOfTax?if_exists}</TAXRATE>					<#assign assessableAmount=subCat.tax*100/orderAdj.rateOfTax>					<#if "Sales"=voucherType>					<ASSESSABLEAMOUNT>${assessableAmount}</ASSESSABLEAMOUNT>					<TAX>${subCat.tax}</TAX>					<#else>					<ASSESSABLEAMOUNT>-${assessableAmount}</ASSESSABLEAMOUNT>					<TAX>${subCat.tax*-1}</TAX>					</#if>					<BILLEDQTY>${subCat.orderItemQty?if_exists} ${subCat.productUom?if_exists?html}</BILLEDQTY>				</SUBCATEGORYALLOCATION.LIST>				</#list>			</TAXOBJECTALLOCATIONS.LIST>			</#if>			<TDSEXPENSEALLOCATIONS.LIST></TDSEXPENSEALLOCATIONS.LIST>			<VATSTATUTORYDETAILS.LIST></VATSTATUTORYDETAILS.LIST>			<COSTTRACKALLOCATIONS.LIST></COSTTRACKALLOCATIONS.LIST>			<#if orderAdj.dutyLedger.taxClassId?exists>			<UDF:MAHWCASSESSABLEVALUE.LIST DESC="`MAHWCAssessableValue`" ISLIST="YES" TYPE="Amount">				<#if "Sales"=voucherType>				<UDF:MAHWCASSESSABLEVALUE DESC="`MAHWCAssessableValue`">${vatAssessableValue?if_exists}</UDF:MAHWCASSESSABLEVALUE>				<#else>				<UDF:MAHWCASSESSABLEVALUE DESC="`MAHWCAssessableValue`">${vatAssessableValue?if_exists*-1}</UDF:MAHWCASSESSABLEVALUE>				</#if>			</UDF:MAHWCASSESSABLEVALUE.LIST>			</#if>		</LEDGERENTRIES.LIST>		</#if>		</#list>		</#if>		<#if orderItems?has_content>		<#list orderItems as lineItem>		<ALLINVENTORYENTRIES.LIST>			<STOCKITEMNAME>${lineItem.productName?html}</STOCKITEMNAME>			<ISDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISDEEMEDPOSITIVE>			<ISLASTDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISLASTDEEMEDPOSITIVE>			<ISAUTONEGATE>No</ISAUTONEGATE>			<ISCUSTOMSCLEARANCE>No</ISCUSTOMSCLEARANCE>			<ISTRACKCOMPONENT>No</ISTRACKCOMPONENT>			<ISTRACKPRODUCTION>No</ISTRACKPRODUCTION>			<ISPRIMARYITEM>No</ISPRIMARYITEM>			<ISSCRAP>No</ISSCRAP>			<RATE>${lineItem.unitPrice}/${lineItem.productUom?if_exists?html}</RATE>			<#assign amount=lineItem.unitPrice*lineItem.quantity>			<#if "Sales"=voucherType>			<AMOUNT>${amount}</AMOUNT>			<#else>			<AMOUNT>${amount*-1}</AMOUNT>			</#if>			<ACTUALQTY> ${lineItem.quantity} ${lineItem.productUom?if_exists?html}</ACTUALQTY>			<BILLEDQTY> ${lineItem.quantity} ${lineItem.productUom?if_exists?html}</BILLEDQTY>			<#if maintainMultipleGodowns>				<BATCHALLOCATIONS.LIST>			        <GODOWNNAME>Main Location</GODOWNNAME>			        <BATCHNAME>Primary Batch</BATCHNAME>			        <DESTINATIONGODOWNNAME>Main Location</DESTINATIONGODOWNNAME>			        <INDENTNO/>			        <ORDERNO/>			        <TRACKINGNUMBER/>			        <DYNAMICCSTISCLEARED>No</DYNAMICCSTISCLEARED>			        <#if "Sales"=voucherType>						<AMOUNT>${amount}</AMOUNT>						<#else>						<AMOUNT>${amount*-1}</AMOUNT>					</#if>			        <ACTUALQTY><#if "Sales"=voucherType>${lineItem.quantity*-1} ${lineItem.productUom?if_exists?html}<#else>${lineItem.quantity} ${lineItem.productUom?if_exists?html}</#if></ACTUALQTY>					<BILLEDQTY><#if "Sales"=voucherType>${lineItem.quantity*-1} ${lineItem.productUom?if_exists?html}<#else>${lineItem.quantity} ${lineItem.productUom?if_exists?html}</#if></BILLEDQTY>			        <ADDITIONALDETAILS.LIST></ADDITIONALDETAILS.LIST>			        <VOUCHERCOMPONENTLIST.LIST></VOUCHERCOMPONENTLIST.LIST>       			 </BATCHALLOCATIONS.LIST>			</#if>			<#if lineItem.purchaseOrSalesAccountLedger?exists>			<ACCOUNTINGALLOCATIONS.LIST>				<#assign taxClass = delegator.findOne("TaxClassification",true,"taxClassId",lineItem.purchaseOrSalesAccountLedger.taxClassId)>				<TAXCLASSIFICATIONNAME>${taxClass.className?if_exists?html}</TAXCLASSIFICATIONNAME>				<LEDGERNAME>${lineItem.purchaseOrSalesAccountLedger.accountName?if_exists?html}</LEDGERNAME>				<GSTCLASS />				<ISDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISDEEMEDPOSITIVE>				<LEDGERFROMITEM>No</LEDGERFROMITEM>				<REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>				<ISPARTYLEDGER>No</ISPARTYLEDGER>				<ISLASTDEEMEDPOSITIVE><#if "Sales"=voucherType>No<#else>Yes</#if></ISLASTDEEMEDPOSITIVE>				<#if "Sales"=voucherType>				<AMOUNT>${amount}</AMOUNT>				<#else>				<AMOUNT>${amount*-1}</AMOUNT>				</#if>				<BANKALLOCATIONS.LIST></BANKALLOCATIONS.LIST>				<BILLALLOCATIONS.LIST></BILLALLOCATIONS.LIST>				<INTERESTCOLLECTION.LIST></INTERESTCOLLECTION.LIST>				<AUDITENTRIES.LIST></AUDITENTRIES.LIST>				<TAXBILLALLOCATIONS.LIST></TAXBILLALLOCATIONS.LIST>				<TAXOBJECTALLOCATIONS.LIST></TAXOBJECTALLOCATIONS.LIST>				<TDSEXPENSEALLOCATIONS.LIST></TDSEXPENSEALLOCATIONS.LIST>				<VATSTATUTORYDETAILS.LIST></VATSTATUTORYDETAILS.LIST>				<COSTTRACKALLOCATIONS.LIST></COSTTRACKALLOCATIONS.LIST>			</ACCOUNTINGALLOCATIONS.LIST>			</#if>			<EXCISEALLOCATIONS.LIST></EXCISEALLOCATIONS.LIST>			<#if lineItem.expenseList?exists>			<#list lineItem.expenseList as expense>			<EXPENSEALLOCATIONS.LIST>				<LEDGERNAME>${expense.accountName?html}</LEDGERNAME>				<#if "Sales"=voucherType>				<VATASSESSABLEAMOUNT>${expense.amount}</VATASSESSABLEAMOUNT>				<#else>				<VATASSESSABLEAMOUNT>${expense.amount*-1}</VATASSESSABLEAMOUNT>				</#if>			</EXPENSEALLOCATIONS.LIST>			</#list>			</#if>			<#if lineItem.exciseList?exists>			<EXCISEALLOCATIONS.LIST>				<#list lineItem.exciseList as excise>				<EXCISEDUTYALLOCATIONS.LIST>					<TRADERDUTYTYPES>${excise.exciseLedger.accountName?html}</TRADERDUTYTYPES>					<#if excise.amount?exists>					<#if "Sales"=voucherType>					<EXCISEDUTYAMOUNT>${excise.amount}</EXCISEDUTYAMOUNT>					<#else>					<EXCISEDUTYAMOUNT>${excise.amount*-1}</EXCISEDUTYAMOUNT>					</#if>					</#if>				</EXCISEDUTYALLOCATIONS.LIST>				</#list>			</EXCISEALLOCATIONS.LIST>			</#if>		</ALLINVENTORYENTRIES.LIST>		</#list>		</#if>	</VOUCHER></TALLYMESSAGE>