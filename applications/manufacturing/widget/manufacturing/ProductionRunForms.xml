<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">
    <form name="CreateProductionRun" target="createProductionRun" title="" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="productId" title="${uiLabelMap.ProductProductId}"><lookup target-form-name="LookupProduct" size="16"/></field>
        <field name="quantity" title="${uiLabelMap.ManufacturingQuantity}"><text size="6"/></field>
        <field name="startDate" title="${uiLabelMap.ManufacturingStartDate}"><date-time/></field>
        <field name="facilityId">
            <drop-down allow-empty="false">
                <entity-options entity-name="Facility" description="${facilityName} [${facilityId}]">
                    <!--<entity-constraint name="facilityTypeId" value="WAREHOUSE"/>-->
                </entity-options>
            </drop-down>
        </field>
        <field name="routingId" title="${uiLabelMap.ManufacturingRoutingId}" required-field="true"><lookup target-form-name="LookupRouting" size="16"/></field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingProductionRunName}"><text size="30"/></field>
        <field name="description" title="${uiLabelMap.CommonDescription}"><text size="50"/></field>
        <field name="createDependentProductionRuns" title="${uiLabelMap.ManufacturingCreateDependentProductionRuns}">
            <drop-down allow-empty="false">
                <option key="N" description="${uiLabelMap.CommonNo}"/>
                <option key="Y" description="${uiLabelMap.CommonYes}"/>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="findProductionRun" target="FindProductionRun" title="" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="workEffortTypeId"><hidden value="PROD_ORDER_HEADER"/></field>
        <field name="workEffortId" title="${uiLabelMap.ManufacturingProductionRunId}"><text-find/></field>
        <field name="currentStatusId" title="${uiLabelMap.CommonStatus}">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description}">
                    <entity-constraint name="statusTypeId" value="PRODUCTION_RUN"/>
                </entity-options>
             </drop-down>
        </field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><lookup target-form-name="LookupProduct"/></field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingProductionRunName}"><text-find/></field>
        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingStartDate}"><date-find/></field>
        <field name="facilityId" title="${uiLabelMap.ProductFacilityId}">
            <drop-down allow-empty="true">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]">
                    <!--<entity-constraint name="facilityTypeId" value="WAREHOUSE"/>-->
                </entity-options>
             </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary"><submit button-type="button"/></field>
    </form>

    <form name="listFindProductionRun" list-name="listIt" title="" type="list" paginate-target="/FindProductionRun"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="WorkEffortAndGoods"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="orderBy" value="estimatedStartDate"/>
            </service>
        </actions>
        <field name="workEffortId" title=" " widget-style="buttontext">
            <hyperlink target="ShowProductionRun" description="${workEffortId}" also-hidden="false">
                <parameter param-name="productionRunId" from-field="workEffortId"/>
            </hyperlink>
        </field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingProductionRunName}"><display/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
        <field name="estimatedQuantity" title="${uiLabelMap.ManufacturingQuantity}"><display/></field>
        <field name="currentStatusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId"/>
        </field>

        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingStartDate}"><display/></field>
        <field name="description" title="${uiLabelMap.CommonDescription}"><display/></field>
        <field name="facilityId" title="${uiLabelMap.ProductFacilityId}"><display/></field>
    </form>

     <form name="UpdateProductionRun" type="single" target="updateProductionRun" title="" default-map-name="productionRunData"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="productionRunId"><hidden/></field>
        <field name="productId" title="${uiLabelMap.ProductProductName}">
            <display-entity entity-name="Product" description="${internalName} [${productId}]"/>
        </field>
        <field name="currentStatusId">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        <field name="facilityId" title="${uiLabelMap.ProductFacilityId}">
            <drop-down>
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]">
                    <entity-constraint name="facilityTypeId" value="WAREHOUSE"/>
                </entity-options>
             </drop-down>
        </field>
        <field name="quantity"  title="${uiLabelMap.ManufacturingQuantity}"><text size="10"/></field>
        <field name="estimatedStartDate"  title="${uiLabelMap.ManufacturingStartDate}"><date-time/></field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}"><display/></field>
        <field name="workEffortName"  title="${uiLabelMap.ManufacturingProductionRunName}"><text/></field>
        <field name="description"><text/></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-success"><submit button-type="button"/></field>
    </form>
    <form name="ListProductionRunOrderItems" type="list" target="EditProductionRun" title="" list-name="orderItems"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="orderId" widget-style="buttontext">
            <hyperlink target="/ordermgr/control/orderview" description="${orderId}/${orderItemSeqId}" also-hidden="false" target-type="inter-app">
                <parameter param-name="orderId"/>
            </hyperlink>
        </field>
        <!--
        <field name="orderItemSeqId"><display/></field>
        <field name="orderItemGroupSeqId"><display/></field>
        <field name="quantity"><display/></field>
        <field name="cancelQuantity"><display/></field>
        <field name="shipAfterDate"><display/></field>
        <field name="shipBeforeDate"><display/></field>
        <field name="estimatedShipDate"><display/></field>
        <field name="estimatedDeliveryDate"><display/></field>
        -->
    </form>
    <form name="ListProductionRunInventoryItems" type="list" title="" list-name="inventoryItems"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <row-actions>
            <entity-one entity-name="InventoryItem" value-field="inventoryItem"/>
            <entity-condition entity-name="InventoryItemDetail" list="inventoryItemDetails">
                <condition-expr field-name="inventoryItemId" operator="equals" from-field="inventoryItemId"/>
                <order-by field-name="inventoryItemDetailSeqId"/>
            </entity-condition>
            <set field="quantityOnHandDiff" from-field="inventoryItemDetails[0].quantityOnHandDiff"/>
        </row-actions>
        <field name="inventoryItemId" widget-style="buttontext">
            <hyperlink target="/facility/control/EditInventoryItem"  description="${inventoryItemId}" also-hidden="false" target-type="inter-app">
                <parameter param-name="inventoryItemId"/>
            </hyperlink>
        </field>
        <field name="lotId" map-name="inventoryItem"><display/></field>
        <field name="statusId" map-name="inventoryItem"><display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/></field>
        <field name="unitCost" map-name="inventoryItem"><display/></field>
        <field name="quantity" entry-name="quantityOnHandDiff"><display/></field>
        <field name="datetimeReceived" map-name="inventoryItem"><display/></field>
    </form>

     <form name="ViewListProductionRunRoutingTasks" type="list" title="" list-name="productionRunRoutingTasks"
         odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
         <row-actions>
             <set field="estimatedTotalMilliSeconds" value="${groovy:estimatedMilliSeconds * quantity}"  type="BigDecimal"/>
         </row-actions>
        <field name="priority" title="${uiLabelMap.CommonSequenceNum}"><display/></field>
        <field name="workEffortId"  title="${uiLabelMap.ManufacturingTaskName}"><display description="${workEffortName} [${workEffortId}]"/></field>
        <field name="fixedAssetId"  title="${uiLabelMap.ManufacturingMachine}"><display/></field>
        <field name="reservPersons"><display/></field>
        <field name="estimatedStartDate"  title="${uiLabelMap.ManufacturingStartDate}"><display/></field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}"><display/></field>
        <field name="estimatedSetupMillis" title="${uiLabelMap.ManufacturingTaskEstimatedSetupMillis}" ><display/></field>
        <field name="estimatedMilliSeconds" title="${uiLabelMap.ManufacturingTaskEstimatedMilliSeconds}" ><display/></field>
        <field name="estimatedTotalMilliSeconds" title="${uiLabelMap.ManufacturingTaskEstimatedTotalMilliSeconds}" ><display/></field>
    </form>
    <form name="ListProductionRunRoutingTasks" type="list" target="ProductionRunTasks" title="" list-name="productionRunRoutingTasks"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <row-actions>
            <set field="estimatedTotalMilliSeconds" value="${groovy:estimatedMilliSeconds * quantity}" type="BigDecimal"/>
        </row-actions>
        <field name="priority" title="${uiLabelMap.CommonSequenceNum}"><display/></field>
        <field name="workEffortId"  title="${uiLabelMap.ManufacturingTaskName}"><display description="${workEffortName} [${workEffortId}]"/></field>
        <field name="fixedAssetId"  title="${uiLabelMap.ManufacturingMachine}"><display/></field>
        <field name="reservPersons"><display/></field>
        <field name="estimatedStartDate"  title="${uiLabelMap.ManufacturingStartDate}"><display/></field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}"><display/></field>
        <field name="estimatedSetupMillis" title="${uiLabelMap.ManufacturingTaskEstimatedSetupMillis}" ><display/></field>
        <!--<field name="estimatedMilliSeconds" title="${uiLabelMap.ManufacturingTaskEstimatedMilliSeconds}" ><display/></field>-->
        <field name="estimatedTotalMilliSeconds" title="${uiLabelMap.ManufacturingTaskEstimatedTotalMilliSeconds}" ><display/></field>
        <field name="editLink" title=" " widget-style="btn btn-mini">
            <hyperlink target="ProductionRunTasks" description="${uiLabelMap.CommonEdit}" also-hidden="false">
                <parameter param-name="routingTaskId" from-field="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
            </hyperlink>
        </field>
        <field name="deleteLink" title=" " widget-style="btn btn-mini">
            <!--<hyperlink target="RemoveRoutingTaskAssoc"  description="[${uiLabelMap.CommonDelete}]" also-hidden="false">
                <parameter param-name="workEffortIdFrom"/>
                <parameter param-name="workEffortIdTo"/>
                <parameter param-name="fromDate"/>
                <parameter param-name="workEffortAssocTypeId" value="ROUTING_COMPONENT"/>
            </hyperlink>-->
            <hyperlink target="deleteProductionRunRoutingTask" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
            </hyperlink>
        </field>
    </form>

    <form name="ListProductionRunComponents" type="list" target="EditProductionRun" title="" list-name="productionRunComponents"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTaskId}">
            <display-entity entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]"/>
        </field>
        <field name="productId" title="${uiLabelMap.ProductProductName}">
            <display-entity entity-name="Product" description="${internalName} [${productId}]"/>
        </field>
        <field name="estimatedQuantity" title="${uiLabelMap.ManufacturingQuantity}"><display/></field>
    </form>

    <form name="EditProductionRunRoutingTask" type="single" target="updateProductionRunRoutingTask" title="" default-map-name="productionRunTask"
        header-row-style="header-row" default-table-style="basic-table">
        <alt-target use-when="productionRunTask==null" target="addProductionRunRoutingTask"/>
        <field name="productionRunId">
            <hidden value="${productionRunId}"/>
        </field>
        <field name="routingTaskId" title="${uiLabelMap.ManufacturingRoutingTaskId}" use-when="productionRunTask==null">
            <lookup target-form-name="LookupRoutingTask"/>
        </field>
        <field name="routingTaskId" map-name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTaskId}" use-when="productionRunTask!=null">
            <display/>
        </field>
        <field name="priority" title="${uiLabelMap.CommonSequenceNum}">
            <text size="4"/>
        </field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingTaskName}">
            <text/>
        </field>
        <field name="description">
            <text/>
        </field>
        <field name="reservPersons"><text/></field>
        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingStartDate}">
            <date-time/>
        </field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}">
            <display/>
        </field>
        <field name="estimatedSetupMillis" title="${uiLabelMap.ManufacturingTaskEstimatedSetupMillis}">
            <text/>
        </field>
        <field name="estimatedMilliSeconds" title="${uiLabelMap.ManufacturingTaskEstimatedMilliSeconds}">
            <text/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonEdit}">
            <submit button-type="button"/>
        </field>
    </form>

    <!-- Production Run Declaration -->
    <form name="ShowProductionRun" type="single" target="productionRunProduce" title="" default-map-name="productionRunData"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <set field="useRequestParameters" value="false" type="Boolean"/>
        </actions>
        <field name="workEffortId"><hidden/></field>
        <field name="productId" title="${uiLabelMap.ProductProductName}">
            <display-entity entity-name="Product" description="${internalName} [${productId}]"/>
        </field>
        <field name="currentStatusId">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        <field name="quantityToProduce" title="${uiLabelMap.ManufacturingQuantityToProduce}">
            <display/>
        </field>
        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingEstimatedStartDate}"><display/></field>
        <field name="actualStartDate" title="${uiLabelMap.CommonActualStartDate}"><display/></field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}"><display/></field>
        <field name="actualCompletionDate" title="${uiLabelMap.ManufacturingActualCompletionDate}"><display/></field>
        <field name="productionRunName"  title="${uiLabelMap.ManufacturingProductionRunName}"><display/></field>
        <field name="description" title="${uiLabelMap.CommonDescription}"><display/></field>
        <field name="quantityProduced" title="${uiLabelMap.ManufacturingQuantityProduced}"><display/></field>
        <field name="quantityRejected" title="${uiLabelMap.ManufacturingQuantityRejected}"><display/></field>
    </form>
    <form name="ProductionRunProduce" type="single" target="productionRunProduce" title="" default-map-name="productionRunData"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="workEffortId"><hidden/></field>
        <field name="quantity" title="${uiLabelMap.ManufacturingProduceQuantity}"><text/></field>
        <field name="inventoryItemTypeId">
            <drop-down allow-empty="false" no-current-selected-key="NON_SERIAL_INV_ITEM">
                <entity-options entity-name="InventoryItemType" description="${description}"/>
            </drop-down>
        </field>
        <field name="lotId"><text default-value="${lastLotId}"/></field>
        <field name="datetimeReceived" required-field="true"><date-time default-value="${productionRunData.actualCompletionDate}"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ProductionRunDeclareAndProduceTop" id="ProductionRunDeclareAndProduceTop" type="single" skip-end="true" target="productionRunDeclareAndProduce" title="" default-map-name="productionRunData"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="workEffortId"><hidden/></field>
        <field name="quantity" title="${uiLabelMap.ManufacturingProduceQuantity}" tooltip="${uiLabelMap.ManufacturingProduceQuantityMessage}"><text/></field>
        <field name="inventoryItemTypeId">
            <drop-down allow-empty="false" no-current-selected-key="NON_SERIAL_INV_ITEM">
                <entity-options entity-name="InventoryItemType" description="${description}"/>
            </drop-down>
        </field>
        <field name="lotId"><text default-value="${lastLotId}"/></field>
        <field name="datetimeReceived" required-field="true"><date-time default-value="${productionRunData.actualCompletionDate}"/></field>
    </form>
    <form name="ProductionRunDeclareAndProduceBottom" skip-start="true" type="multi" title="" list-name="productionRunComponentsDataReadyForIssuance"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="productionRunTaskId" entry-name="workEffortId"><hidden/></field>
        <field name="productId"><hidden/></field>
        <field name="fromDate"><hidden/></field>
        <field name="failIfItemsAreNotAvailable">
            <drop-down allow-empty="false">
                <option key="Y" description="${uiLabelMap.CommonYes}"/>
                <option key="N" description="${uiLabelMap.CommonNo}"/>
            </drop-down>
        </field>
        <field name="task" entry-name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTaskId}">
            <display description="${workEffortName} [${workEffortId}]" also-hidden="false"/>
        </field>
        <field name="internalName" title="${uiLabelMap.ProductProductName}">
            <display description="${internalName} [${productId}]" also-hidden="false"/>
        </field>
        <field name="estimatedQuantity" title="${uiLabelMap.ManufacturingQuantity}"><display also-hidden="false"/></field>
        <field name="issuedQuantity" title="${uiLabelMap.ManufacturingIssuedQuantity}"><display also-hidden="false"/></field>
        <field name="locationSeqId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductFacilityLocation" description="${locationSeqId}">
                    <entity-constraint name="productId" env-name="productId"/>
                    <entity-constraint name="facilityId" env-name="facilityId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="secondaryLocationSeqId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductFacilityLocation" description="${locationSeqId}" key-field-name="locationSeqId">
                    <entity-constraint name="productId" env-name="productId"/>
                    <entity-constraint name="facilityId" env-name="facilityId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="_rowSubmit"><hidden value="Y"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success" event="onClick" action="javascript:jQuery('#ProductionRunDeclareAndProduceTop').validate();invokeExport(this.form);" id-name="submit"><submit/></field>
    </form>

    <form name="ListProductionRunDeclRoutingTasks" type="list" target="ProductionRunDeclaration" title="" list-name="productionRunRoutingTasks"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="actionForm"><hidden value="EditRoutingTask"/></field>
        <field name="productionRunId"><hidden value="${workEffortParentId}"/></field>
        <field name="routingTaskId"><hidden value="${workEffortId}"/></field>
        <field name="priority" title="${uiLabelMap.CommonSequenceNum}"><display/></field>
        <field name="workEffortId" title="${uiLabelMap.ManufacturingTaskName}"><display description="${workEffortName} [${workEffortId}]"/></field>
        <field name="currentStatusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        <field name="fixedAssetId"  title="${uiLabelMap.ManufacturingMachine}"><display/></field>
        <field name="reservPersons"><display/></field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}"><display/></field>
        <field name="actualSetupMillis" title="${uiLabelMap.ManufacturingTaskActualSetupMillis}" ><display/></field>
        <field name="actualMilliSeconds" title="${uiLabelMap.ManufacturingTaskActualMilliSeconds}" ><display/></field>
        <field name="quantityProduced" title="${uiLabelMap.ManufacturingQuantityProduced}" ><display/></field>
        <field name="startLink" title=" " widget-style="btn btn-mini" use-when="&quot;${startTaskId}&quot;.equals(&quot;${workEffortId}&quot;)">
            <hyperlink target="changeProductionRunTaskStatus" description="${uiLabelMap.ManufacturingStartProductionRunTask}" also-hidden="false">
                <parameter param-name="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
            </hyperlink>
        </field>
        <field name="issueLinkAtp" title=" " widget-style="btn btn-mini" use-when="&quot;${issueTaskId}&quot;.equals(&quot;${workEffortId}&quot;)">
            <hyperlink target="issueProductionRunRoutingTask" description="${uiLabelMap.ManufacturingIssueAvailableProductionRunTask}" also-hidden="false">
                <parameter param-name="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
                <parameter param-name="failIfItemsAreNotAvailable" value="Y"/>
            </hyperlink>
        </field>
        <field name="issueLinkQoh" title=" " widget-style="btn btn-mini" use-when="&quot;${issueTaskId}&quot;.equals(&quot;${workEffortId}&quot;)">
            <hyperlink target="issueProductionRunRoutingTask" description="${uiLabelMap.ManufacturingIssueProductionRunTask}" also-hidden="false">
                <parameter param-name="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
                <parameter param-name="failIfItemsAreNotAvailable" value="N"/>
            </hyperlink>
        </field>
        <field name="declareLink" title=" " widget-style="btn btn-mini" use-when="&quot;PRUN_RUNNING&quot;.equals(&quot;${currentStatusId}&quot;)">
            <hyperlink target="ProductionRunDeclaration" description="${uiLabelMap.ManufacturingDeclareProductionRunTask}" also-hidden="false">
                <parameter param-name="actionForm" value="EditRoutingTask"/>
                <parameter param-name="routingTaskId" from-field="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
            </hyperlink>
        </field>
        <field name="completeLink" title=" " widget-style="btn btn-success" use-when="&quot;${completeTaskId}&quot;.equals(&quot;${workEffortId}&quot;)">
            <hyperlink target="changeProductionRunTaskStatus" description="${uiLabelMap.ManufacturingCompleteProductionRunTask}" also-hidden="false">
                <parameter param-name="workEffortId"/>
                <parameter param-name="productionRunId" from-field="workEffortParentId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListIssueProductionRunDeclComponents" type="multi" target="issueProductionRunTaskComponents?productionRunId=${productionRunId}" title="" list-name="productionRunComponentsDataReadyForIssuance"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="productId"><hidden/></field>
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId"><hidden/></field>
        <field name="fromDate"><hidden/></field>
        <field name="failIfItemsAreNotAvailable">
            <drop-down allow-empty="false">
                <option key="Y" description="${uiLabelMap.CommonYes}"/>
                <option key="N" description="${uiLabelMap.CommonNo}"/>
            </drop-down>
        </field>
        <field name="task" entry-name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTaskId}">
            <display description="${workEffortName} [${workEffortId}]"/>
        </field>
        <field name="internalName" title="${uiLabelMap.ProductProductName}">
            <display description="${internalName} [${productId}]" also-hidden="false"/>
        </field>
        <field name="estimatedQuantity" title="${uiLabelMap.ManufacturingQuantity}"><display also-hidden="false"/></field>
        <field name="issuedQuantity" title="${uiLabelMap.ManufacturingIssuedQuantity}"><display also-hidden="false"/></field>
        <field name="locationSeqId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductFacilityLocation" description="${locationSeqId}">
                    <entity-constraint name="productId" env-name="productId"/>
                    <entity-constraint name="facilityId" env-name="facilityId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="secondaryLocationSeqId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductFacilityLocation" description="${locationSeqId}" key-field-name="locationSeqId">
                    <entity-constraint name="productId" env-name="productId"/>
                    <entity-constraint name="facilityId" env-name="facilityId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="lotId">
            <text />
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success"><submit/></field>
    </form>
    <form name="ListReturnProductionRunDeclComponents" type="multi" use-row-submit="true" target="productionRunTaskReturnMaterials?productionRunId=${productionRunId}" title="" list-name="productionRunComponentsAlreadyIssued"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="productId"><hidden/></field>
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId"><hidden/></field>
        <field name="fromDate"><hidden/></field>
        <field name="task" entry-name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTaskId}">
            <display description="${workEffortName} [${workEffortId}]"/>
        </field>
        <field name="internalName" title="${uiLabelMap.ProductProductName}">
            <display description="${internalName} [${productId}]" also-hidden="false"/>
        </field>
        <field name="estimatedQuantity" title="${uiLabelMap.ManufacturingQuantity}"><display also-hidden="false"/></field>
        <field name="issuedQuantity" title="${uiLabelMap.ManufacturingIssuedQuantity}"><display also-hidden="false"/></field>
        <field name="returnedQuantity" title="${uiLabelMap.ManufacturingReturnedQuantity}"><display also-hidden="false"/></field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}"><text /></field>
        <field name="quantity" title="${uiLabelMap.CommonQuantity}"><text/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelected}"><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success"><submit/></field>
    </form>

     <form name="EditProductionRunDeclRoutingTask" type="single" target="updateProductionRunTask" title="" default-map-name="routingTaskData"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="actionForm">
            <hidden value="${actionForm}"/>
        </field>
        <field name="productionRunId">
            <hidden value="${routingTaskData.workEffortParentId}"/>
        </field>
        <field name="productionRunTaskId">
            <hidden value="${routingTaskData.workEffortId}"/>
        </field>
        <field name="priority" title="${uiLabelMap.CommonSequenceNum}">
            <display/>
        </field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingTaskName}">
            <display/>
        </field>
        <field name="description" title="${uiLabelMap.CommonDescription}">
            <display/>
        </field>
        <field name="estimatedCompletionDate" title="${uiLabelMap.ManufacturingEstimatedCompletionDate}">
            <display/>
        </field>
        <field name="fromDate" title="${uiLabelMap.ManufacturingFromDate}">
            <date-time/>
        </field>
        <field name="toDate" title="${uiLabelMap.ManufacturingToDate}">
            <date-time/>
        </field>
        <field name="estimatedSetupMillis" title="${uiLabelMap.ManufacturingTaskEstimatedSetupMillis}">
            <display/>
        </field>
        <field name="actualSetupMillis" title="${uiLabelMap.ManufacturingTaskActualSetupMillis}">
            <display/>
        </field>
        <field name="addSetupTime" title="${uiLabelMap.ManufacturingAddSetupTime}">
            <text/>
        </field>
        <field name="estimatedMilliSeconds" title="${uiLabelMap.ManufacturingTaskEstimatedMilliSeconds}">
            <display/>
        </field>
        <field name="actualMilliSeconds" title="${uiLabelMap.ManufacturingTaskActualMilliSeconds}">
            <display/>
        </field>
        <field name="addTaskTime" title="${uiLabelMap.ManufacturingAddTaskTime}">
            <text/>
        </field>

        <field name="quantityToProduce" title="${uiLabelMap.ManufacturingQuantityToProduce}">
            <display/>
        </field>
        <field name="quantityProduced" title="${uiLabelMap.ManufacturingQuantityProduced}">
            <display/>
        </field>
        <field name="addQuantityProduced" title="${uiLabelMap.ManufacturingAddQuantityProduced}">
            <text/>
        </field>
        <field name="quantityRejected" title="${uiLabelMap.ManufacturingQuantityRejected}">
            <display/>
        </field>
        <field name="addQuantityRejected" title="${uiLabelMap.ManufacturingAddQuantityRejected}">
            <text/>
        </field>
        <field name="comments" title="${uiLabelMap.ManufacturingComments}">
            <text/>
        </field>
        <field name="partyId" title="${uiLabelMap.ManufacturingWorker}">
            <text/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="CreateRoutingTaskDelivProduct" type="single" target="createProductionRunTaskProduct" title="" default-map-name="formData"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId"><hidden value="${routingTaskId}"/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}" use-when="${groovy:delivProducts.size()>0}">
            <drop-down allow-empty="false">
                <list-options list-name="delivProducts" key-name="productId" description="${productId}"/>
            </drop-down>
        </field>
        <field name="productId" title="${uiLabelMap.ProductProductId}" use-when="${groovy:delivProducts.size()==0}"><lookup target-form-name="LookupProduct"/></field>
        <field name="quantity" title="${uiLabelMap.ManufacturingAddQuantityProduced}">
            <text/>
        </field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}">
            <text />
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}"  widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ProductionRunTaskInventoryProducedList" type="list" title="" list-name="prunInventoryProduced"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <row-actions>
            <entity-one entity-name="InventoryItem" value-field="inventory"/>
            <entity-one entity-name="Product" value-field="product">
                <field-map field-name="productId" from-field="inventory.productId"/>
            </entity-one>
        </row-actions>
        <field name="inventoryItemId" title="${uiLabelMap.ProductInventoryItem}" widget-style="buttontext">
            <hyperlink target="/facility/control/EditInventoryItem"  description="${inventoryItemId}" also-hidden="false" target-type="inter-app">
                <parameter param-name="inventoryItemId"/>
            </hyperlink>
        </field>
        <field name="Product">
            <display description="${inventory.productId} - ${product.internalName}"/>
        </field>
        <field name="ATP/QOH">
            <display description="${inventory.availableToPromiseTotal}"/>
        </field>
    </form>
    <form name="FindDelivProductContent" type="single" target="ProductionRunContent">
        <field name="productionRunId"><hidden/></field>
        <field name="productId" entry-name="delivProductId"><hidden/></field>
        <field name="contentLocale">
            <text default-value="${locale}"/>
        </field>
        <field name="partyId">
            <lookup target-form-name="LookupCustomerName"/>
        </field>
        <field name="roleTypeId">
            <hidden value="CONTENT_USER"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ListProductionRunContent" type="list" title="" list-name="productionRunContents">
        <actions>
            <entity-and entity-name="WorkEffortContentAndInfo" list="productionRunContents">
                <field-map field-name="workEffortId" from-field="productionRunId"/>
            </entity-and>
        </actions>
        <field name="workEffortId"><hidden/></field>
        <field name="contentId"><display/></field>
        <field name="drDataResourceId"><display/></field>
        <field name="workEffortContentTypeId"><display-entity entity-name="WorkEffortContentType" description="${description}"/></field>
        <field name="contentTypeId"><display-entity entity-name="ContentType" description="${description}"/></field>
        <field name="contentName"><display/></field>
        <field name="description"><display/></field>
        <field name="localeString"><display/></field>
        <field name="description"><display/></field>
        <field name="drMimeTypeId"><display/></field>
        <field name="drObjectInfo" title="${uiLabelMap.CommonContent}">
            <display description="default ${drObjectInfo}"/>
        </field>
        <field name="drObjectInfo" title="${uiLabelMap.CommonContent}" use-when="${groovy: drDataResourceTypeId != null &amp;&amp; (drDataResourceTypeId.contains(&quot;FILE&quot;) || drDataResourceTypeId.equals(&quot;IMAGE_OBJECT&quot;))}">
            <hyperlink target="/content/control/ViewBinaryDataResource" target-type="content" target-window="productionRunContentWindow" description="${drObjectInfo}">
                <parameter param-name="dataResourceId" from-field="drDataResourceId"/>
            </hyperlink>
        </field>
        <field name="drObjectInfo" title="${uiLabelMap.CommonContent}" entry-name="drDataResourceId" encode-output="true" use-when="${groovy: drDataResourceTypeId != null &amp;&amp; drDataResourceTypeId.equals(&quot;ELECTRONIC_TEXT&quot;)}">
            <display-entity entity-name="ElectronicText" key-field-name="dataResourceId" description="${textData}"></display-entity>
        </field>
        <field name="deleteLink" title=" " widget-style="btn btn-mini">
            <hyperlink description="${uiLabelMap.CommonDelete}" also-hidden="false" target="deleteProductionRunContent">
                <parameter param-name="workEffortId"/>
                <parameter param-name="workEffortContentTypeId"/>
                <parameter param-name="contentId"/>
                <parameter param-name="fromDate"/>
                <parameter param-name="productionRunId" from-field="productionRunId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListDelivProductContent" type="multi" use-row-submit="true" target="createProductionRunContents?productionRunId=${productionRunId}" title="" list-name="delivProductContentsForLocaleAndUser">
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId" entry-name="productionRunId"><hidden/></field>
        <field name="contentId"><display/></field>
        <field name="drDataResourceId"><display/></field>
        <field name="contentTypeId"><display-entity entity-name="ContentType" description="${description}"/></field>
        <field name="contentName"><display/></field>
        <field name="description"><display/></field>
        <field name="localeString"><display/></field>
        <field name="description"><display/></field>
        <field name="drMimeTypeId"><display/></field>
        <field name="drObjectInfo" title="${uiLabelMap.CommonContent}">
            <display description="default ${drObjectInfo}"/>
        </field>
        <field name="drObjectInfo" title="${uiLabelMap.CommonContent}" use-when="${groovy: drDataResourceTypeId != null &amp;&amp; (drDataResourceTypeId.contains(&quot;FILE&quot;) || drDataResourceTypeId.equals(&quot;IMAGE_OBJECT&quot;))}">
            <hyperlink target="/content/control/ViewBinaryDataResource" target-type="content" target-window="productionRunContentWindow" description="${drObjectInfo}">
                <parameter param-name="dataResourceId" from-field="drDataResourceId"/>
            </hyperlink>
        </field>
        <field name="drObjectInfo" title="${uiLabelMap.CommonContent}" entry-name="drDataResourceId" encode-output="true" use-when="${groovy: drDataResourceTypeId != null &amp;&amp; drDataResourceTypeId.equals(&quot;ELECTRONIC_TEXT&quot;)}">
            <display-entity entity-name="ElectronicText" key-field-name="dataResourceId" description="${textData}"></display-entity>
        </field>
        <field name="workEffortContentTypeId"><drop-down><entity-options description="${description}" entity-name="WorkEffortContentType"></entity-options></drop-down></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelected}"><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success"><submit/></field>
    </form>
    <form name="ProductionRunTaskFixedAssets" id="ProductionRunTaskFixedAssets" type="list" target="updateWorkEffortFixedAssetAssign" paginate-target="" title="" list-name="records" separate-columns="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <auto-fields-entity entity-name="WorkEffortFixedAssetAssign" default-field-type="edit"/>
        <field name="productionRunId" id-name="productionRunId"><hidden/></field>
        <field name="statusId"><hidden/></field>
        <field name="fromDate"><display/></field>
        <field name="workEffortId" id-name="workEffortId" title="Routing Task Name">
            <display-entity entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]"/>
        </field>
        <field name="fixedAssetId" id-name="fixedAssetId" title="Fixed Asset">
            <display-entity entity-name="FixedAsset" description="${fixedAssetName} [${fixedAssetId}]"/>
        </field>
        <field name="availabilityStatusId">
            <!-- <drop-down no-current-selected-key="WEFA_IN_USE">
                <entity-options description="${description}" entity-name="StatusItem" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="WEFA_AVAILABILITY"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down> -->
            <hidden/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-mini btn-success"><submit button-type="button"/></field>
        <field name="productMeterTypeId" id-name="productMeterTypeId" title="Asset Usage" event="onchange" action="javascript:assignAssetUsage(this);">
            <drop-down current="first-in-list">
                <option key="" description="--Select Asset Usage--"/>
                <option key="stoppage" description="Stoppage"/>
                <option key="electric" description="Electric Consumption"/>
            </drop-down>
        </field>
        <!-- <field name="assetUsageLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini">
            <hyperlink description="Asset Usage" also-hidden="false" target="ProductionRunFixedAssetMeterReading">
                <parameter param-name="workEffortId"/>
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="productionRunId"/>
            </hyperlink>
        </field> -->
        <field name="deleteLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-danger"
                    use-when="!&quot;${declarationScreen}&quot;.equals(&quot;Y&quot;)">
            <hyperlink description="${uiLabelMap.CommonDelete}" also-hidden="false" target="removeWorkEffortFixedAssetAssign">
                <parameter param-name="workEffortId"/>
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="fromDate"/>
                <parameter param-name="productionRunId" from-field="productionRunId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListProductionRunTaskFixedAssets" type="list" title="" list-name="productionRunFixedAssetsData"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <auto-fields-entity entity-name="WorkEffortFixedAssetAssign" default-field-type="display"/>
        <field name="workEffortId">
            <display-entity entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]"/>
        </field>
        <field name="fixedAssetId">
            <display-entity entity-name="FixedAsset" description="${fixedAssetName}"/>
        </field>
        <field name="statusId">
            <display-entity entity-name="StatusItem"/>
        </field>
    </form>
    <form name="ListProductionRunNotes" type="list" title="" list-name="productionRunNoteData"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <auto-fields-entity entity-name="WorkEffortNoteAndData" default-field-type="display"/>
        <field name="workEffortId"><hidden/></field>
        <field name="internalNote"><hidden/></field>
        <field name="noteId"><hidden/></field>
        <field name="noteParty"><hidden/></field>
        <field name="noteDateTime"><hidden/></field>
    </form>
    <form name="EditProductionRunTaskFixedAsset" type="single" target="EditProductionRun" title="" default-map-name="fixedAssetData"
        header-row-style="header-row" default-table-style="basic-table">
        <alt-target use-when="declarationScreen.equals(&quot;Y&quot;)" target="ProductionRunDeclaration"/>
        <auto-fields-entity entity-name="WorkEffortFixedAssetAssign"/>
        <field name="actionForm"><hidden value="${actionForm}"/></field>
        <field name="productionRunId"><hidden /></field>
        <field name="workEffortId" use-when="${actionIsAdd}!=null">
            <drop-down allow-empty="false">
                <entity-options entity-name="WorkEffort" description="[${workEffortId}] ${workEffortName}">
                    <entity-constraint name="workEffortParentId" value="${productionRunId}"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="workEffortId" use-when="${actionIsAdd}==null">
            <display-entity entity-name="WorkEffort" description="[${workEffortId}] ${workEffortName}"/>
        </field>
        <field name="fixedAssetId" use-when="${actionIsAdd}!=null">
            <drop-down allow-empty="false">
                <entity-options entity-name="FixedAsset" description="${fixedAssetName}"/>
            </drop-down>
        </field>
        <field name="fixedAssetId" use-when="${actionIsAdd}==null">
            <display-entity entity-name="FixedAsset" description="${fixedAssetName}"/>
        </field>
        <field name="fromDate" use-when="${actionIsAdd}==null">
            <display />
        </field>
        <field name="statusId">
            <!-- Statuses are not yet defined for the WorkEffortFixedAssetAssign entity
                so this field will be hidden meanwhile
            <drop-down>
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="WORK_EFF_ASSET_STTS"/>
                </entity-options>
            </drop-down> -->
            <hidden />
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>

    <form name="AddProductionRunTaskFixedAsset" type="single" target="createWorkEffortFixedAssetAssign" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="createWorkEffortFixedAssetAssign"/>
        <field name="productionRunId"><hidden /></field>
        <!-- <field name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTask}">
            <drop-down allow-empty="false">
                <entity-options entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]">
                    <entity-constraint name="workEffortParentId" value="${productionRunId}"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="fixedAssetId" title="${uiLabelMap.ManufacturingMachine}">
            <drop-down allow-empty="false">
                <entity-options entity-name="FixedAsset" description="${fixedAssetName} [${fixedAssetId}]"/>
            </drop-down>
        </field> -->
        <field name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTask}" id-name="workEffortId" required-field="true" event="onChange" action="javascript: getDependentFixedAssets(this.value);">
            <drop-down current="selected">
                <option key="" description="-- Select --"/>
                <entity-options entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]" key-field-name="workEffortId">
                    <entity-constraint name="workEffortParentId" value="${productionRunId}"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="fixedAssetId" title="${uiLabelMap.ManufacturingMachine}" id-name="fixedAssetId" required-field="true">
            <drop-down current="selected">
            </drop-down>
        </field>
        <field name="fromDate" title="From Date" widget-style="">
            <date-time default-value="${workEffort.estimatedStartDate}"/>
        </field>
        <field name="thruDate" title="Thru Date">
            <date-time default-value="${workEffort.estimatedCompletionDate}"/>
        </field>
        <field name="statusId">
            <!-- Statuses are not yet defined for the WorkEffortFixedAssetAssign entity
                so this field will be hidden meanwhile
            <drop-down>
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="WORK_EFF_ASSET_STTS"/>
                </entity-options>
            </drop-down> -->
            <hidden />
        </field>
        <field name="availabilityStatusId">
            <!-- <drop-down no-current-selected-key="WEFA_IN_USE">
                <entity-options description="${description}" entity-name="StatusItem" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="WEFA_AVAILABILITY"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down> -->
            <hidden/>
        </field>
        <field name="comments"><textarea cols="30" rows="2"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    
    <!-- create a fixed asset electric meter reading -->
    <form name="AddProductionRunTaskFixedAssetElectricMeter" type="single" target="createProductionRunFixedAssetMeter" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="createFixedAssetMeter"/>
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId" title="Routing Task Name"><display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} [${workEffortId}]"/></field>
        <field name="fixedAssetId" title="Fixed Asset Name"><display-entity entity-name="FixedAsset" description="${fixedAssetName} [${fixedAssetId}]"/></field>
        <field name="maintHistSeqId" use-when="maintHistSeqId != null"><hidden/></field>
        <field name="maintHistSeqId" use-when="maintHistSeqId == null"><ignored/></field>
        <field name="productMeterTypeId" >
            <hidden value="ELECTRIC_METER"/>
        </field>
        <field name="productMeterType" title="Product Meter Type Id">
            <display default-value="ELECTRIC_METER" description="Electric Consumption"/>
        </field>
        <field name="readingDate" title="Start Time" required-field="true"><date-time/></field>
        <field name="meterValue" title="Units Consumed" required-field="true"><text size="20"/></field>
        <field name="uomId" title="Units" id-name="uomId" required-field="true">
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
                    <entity-constraint name="uomTypeId" operator="equals" value="POWER_MEASURE"/>
                    <entity-order-by field-name="uomId" />
                </entity-options>
            </drop-down>
        </field>
        <field name="readingReasonEnumId"><hidden/></field>
        <field name="departmentCause"><hidden/></field>
        <field name="commentsReason" title="Comments"><textarea cols="30" rows="2"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success"><submit button-type="button"/></field>
        <sort-order>
            <sort-field name="productionRunId"/>
            <sort-field name="workEffortId"/>
            <sort-field name="fixedAssetId"/>
            <sort-field name="maintHistSeqId"/>
            <sort-field name="productMeterTypeId"/>
            <sort-field name="productMeterType"/>
            <sort-field name="readingDate"/>
            <sort-field name="meterValue"/>
            <sort-field name="uomId"/>
            <sort-field name="readingReasonEnumId"/>
            <sort-field name="departmentCause"/>
            <sort-field name="commentsReason"/>
            <sort-field name="submitButton"/>
        </sort-order>
    </form>
    
    <!-- List all fixed asset electric meter reading -->
    <form name="ListProductionRunTaskFixedAssetElectricMeters" type="list" list-name="listIt" target="updateProductionRunFixedAssetMeter" paginate-target="ProductionRunFixedAssetMeters"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
        <actions>
            <!-- <set field="findParams.fixedAssetId" from-field="parameters.fixedAssetId"/> -->
            <set field="findParams.productionRunId" from-field="parameters.productionRunId"/>
            <set field="findParams.productMeterTypeId" value="ELECTRIC_METER"/>
            <set field="findParams.maintHistSeqId" from-field="parameters.maintHistSeqId" default-value=""/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="findParams"/>
                <field-map field-name="entityName" value="FixedAssetMeter"/>
                <field-map field-name="orderBy" value="-readingDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="productionRunId"><hidden/></field>
        <field name="productMeterTypeId"><hidden/></field>
        <field name="workEffortId" title="Routing Task Name"><display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} [${workEffortId}]"/></field>
        <field name="fixedAssetId"><display-entity entity-name="FixedAsset" description="${fixedAssetName} [${fixedAssetId}]"/></field>
        <field name="readingDate" title="Start Time"><display/></field>
        <field name="meterValue" title="Units Consumed"><display/></field>
        <field name="uomId" title="Units"><display-entity entity-name="Uom" description="${description} [${abbreviation}]"/></field>
        <field name="commentsReason" title="Comments"><display/></field>
        <!-- <field name="maintHistSeqId" title="${uiLabelMap.AccountingFixedAssetMaint}">
            <hyperlink target="EditFixedAssetMaint" description="${maintHistSeqId}" also-hidden="false">
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="maintHistSeqId"/>
            </hyperlink>
        </field> -->
        <!-- <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-mini btn-success"><submit button-type="button"/></field> -->
        <!-- <field name="updateButton" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-success" event="onclick" action="javascript:void(0);document.UpdateInvoiceItems_o_${itemIndex}.submit()">
           <hyperlink description="${uiLabelMap.CommonUpdate}" target="updateProductionRunFixedAssetMeter" also-hidden="false">
               <parameter param-name="fixedAssetId"/>
               <parameter param-name="productMeterTypeId"/>
               <parameter param-name="readingDate"/>
               <parameter param-name="maintHistSeqId"/>
               <parameter param-name="productionRunId"/>
           </hyperlink>
       </field> -->
        <field name="deleteLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-danger">
            <hyperlink description="${uiLabelMap.CommonRemove}" target="deleteProductionRunFixedAssetMeter" also-hidden="false">
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="productMeterTypeId"/>
                <parameter param-name="readingDate"/>
                <!-- <parameter param-name="maintHistSeqId"/> -->
                <parameter param-name="productionRunId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- create a fixed asset stoppage time reading -->
    <form name="AddProductionRunTaskFixedAssetStoppageReading" type="single" target="createProductionRunFixedAssetMeter" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="createFixedAssetMeter"/>
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId" title="Routing Task Name"><display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} [${workEffortId}]"/></field>
        <field name="fixedAssetId" title="Fixed Asset Name"><display-entity entity-name="FixedAsset" description="${fixedAssetName} [${fixedAssetId}]"/></field>
        <field name="maintHistSeqId" use-when="maintHistSeqId != null"><hidden/></field>
        <field name="maintHistSeqId" use-when="maintHistSeqId == null"><ignored/></field>
        <field name="productMeterTypeId">
            <hidden value="STOPPAGE"/>
        </field>
        <field name="productMeterType" title="Product Meter Type Id">
            <display default-value="STOPPAGE" description="Stoppage"/>
        </field>
        <field name="readingDate" title="Start Time" required-field="true"><date-time/></field>
        <field name="meterValue" title="Stoppage Duration" required-field="true"><text size="20"/></field>
        <field name="uomId" title="Units" id-name="uomId" required-field="true">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
                <entity-constraint name="uomTypeId" operator="equals" value="SHUTDOWN_MEASURE"/>
                    <entity-order-by field-name="uomId" />
                </entity-options>
            </drop-down>
        </field>
        <field name="departmentCause" title="Department/Cause">
            <drop-down>
                <option key="Zesco Power Cut" description="Zesco Power Cut"/>
                <option key="Electrical" description="Electrical"/>
                <option key="Mechanical" description="Mechanical"/>
                <option key="Instrumentation" description="Instrumentation"/>
                <option key="General" description="General"/>
                <option key="FCB FULL" description="FCB FULL"/>
            </drop-down>
        </field>
        <field name="readingReasonEnumId"><hidden/></field>
        <field name="commentsReason" title="Stoppage Reason"><textarea cols="30" rows="2"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success"><submit button-type="button"/></field>
        <sort-order>
            <sort-field name="productionRunId"/>
            <sort-field name="workEffortId"/>
            <sort-field name="fixedAssetId"/>
            <sort-field name="maintHistSeqId"/>
            <sort-field name="productMeterTypeId"/>
            <sort-field name="productMeterType"/>
            <sort-field name="readingDate"/>
            <sort-field name="meterValue"/>
            <sort-field name="uomId"/>
            <sort-field name="departmentCause"/>
            <sort-field name="readingReasonEnumId"/>
            <sort-field name="commentsReason"/>
            <sort-field name="submitButton"/>
        </sort-order>
    </form>
    
    <!-- List all fixed asset stoppage time reading -->
    <form name="ListProductionRunTaskFixedAssetStoppageReadings" type="list" list-name="listIt" target="updateProductionRunFixedAssetMeter" paginate-target="ProductionRunFixedAssetMeters"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
        <actions>
            <!-- <set field="findParams.fixedAssetId" from-field="parameters.fixedAssetId"/> -->
            <set field="findParams.productionRunId" from-field="parameters.productionRunId"/>
            <set field="findParams.productMeterTypeId" value="STOPPAGE"/>
            <set field="findParams.maintHistSeqId" from-field="parameters.maintHistSeqId" default-value=""/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="findParams"/>
                <field-map field-name="entityName" value="FixedAssetMeter"/>
                <field-map field-name="orderBy" value="-readingDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="productionRunId"><hidden/></field>
        <field name="productMeterTypeId"><hidden/></field>
        <field name="workEffortId" title="Routing Task Name"><display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} [${workEffortId}]"/></field>
        <field name="fixedAssetId"><display-entity entity-name="FixedAsset" description="${fixedAssetName} [${fixedAssetId}]"/></field>
        <field name="readingDate" title="Start Time"><display/></field>
        <field name="meterValue" title="Stoppage Duration"><display/></field>
        <field name="uomId" title="Units"><display-entity entity-name="Uom" description="${description} [${abbreviation}]"/></field>
        <field name="departmentCause" title="Department/Cause"><display/></field>
        <field name="commentsReason" title="Stoppage Reason"><display/></field>
        <!-- <field name="maintHistSeqId" title="${uiLabelMap.AccountingFixedAssetMaint}">
            <hyperlink target="EditFixedAssetMaint" description="${maintHistSeqId}" also-hidden="false">
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="maintHistSeqId"/>
            </hyperlink>
        </field> -->
        <!-- <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-mini btn-success"><submit button-type="button"/></field> -->
        <!-- <field name="updateButton" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-success" event="onclick" action="javascript:void(0);document.UpdateInvoiceItems_o_${itemIndex}.submit()">
           <hyperlink description="${uiLabelMap.CommonUpdate}" target="updateProductionRunFixedAssetMeter" also-hidden="false">
               <parameter param-name="fixedAssetId"/>
               <parameter param-name="productMeterTypeId"/>
               <parameter param-name="readingDate"/>
               <parameter param-name="maintHistSeqId"/>
               <parameter param-name="productionRunId"/>
           </hyperlink>
       </field> -->
        <field name="deleteLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-danger">
            <hyperlink description="${uiLabelMap.CommonRemove}" target="deleteProductionRunFixedAssetMeter" also-hidden="false">
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="productMeterTypeId"/>
                <parameter param-name="readingDate"/>
                <!-- <parameter param-name="maintHistSeqId"/> -->
                <parameter param-name="productionRunId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- create a fixed asset meter reading -->
    <form name="AddProductionRunTaskFixedAssetMeter" type="single" target="createProductionRunFixedAssetMeter" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="createFixedAssetMeter"/>
        <field name="fixedAssetId"><hidden/></field>
        <field name="maintHistSeqId" use-when="maintHistSeqId != null"><hidden/></field>
        <field name="maintHistSeqId" use-when="maintHistSeqId == null"><ignored/></field>
        <field name="productMeterTypeId" title="Product Meter Type Id" id-name="productMeterTypeId" required-field="true" event="onChange" action="javascript: getDependentUoms(this.value);">
            <drop-down current="selected">
                <option key="" description="-- Select --"/>
                <entity-options description="${description}" entity-name="ProductMeterType" key-field-name="productMeterTypeId">
                    <entity-order-by field-name="productMeterTypeId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="readingDate" required-field="true"><date-time/></field>
        <field name="uomId" title="Product Meter Uom" id-name="uomId" required-field="true">
            <drop-down current="selected" >
            </drop-down>
        </field>
        <field name="readingReasonEnumId"><text size="20"/></field>
        <field name="meterValue" title="${uiLabelMap.AccountingFixedAssetMeterValue}" required-field="true"><text size="20"/></field>
        <field name="workEffortId"><display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} [${workEffortId}]"/></field>
        <field name="productionRunId"><hidden/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success"><submit button-type="button"/></field>
    </form>
    
    <!-- List all fixed asset meter readings -->
    <form name="ListProductionRunTaskFixedAssetMeters" type="list" list-name="listIt" target="updateProductionRunFixedAssetMeter" paginate-target="ProductionRunFixedAssetMeters"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <set field="findParams.fixedAssetId" from-field="parameters.fixedAssetId"/>
            <set field="findParams.productionRunId" from-field="parameters.productionRunId"/>
            <set field="findParams.maintHistSeqId" from-field="parameters.maintHistSeqId" default-value=""/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="findParams"/>
                <field-map field-name="entityName" value="FixedAssetMeter"/>
                <field-map field-name="orderBy" value="-readingDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="fixedAssetId"><hidden/></field>
        <field name="productionRunId"><hidden/></field>
        <field name="productMeterTypeId">
            <display-entity entity-name="ProductMeterType" key-field-name="productMeterTypeId" description="${description}"/>
        </field>
        <field name="workEffortId"><display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} [${workEffortId}]"/></field>
        <field name="readingDate"><display/></field>
        <field name="uomId" title="Product Meter Uom"><display-entity entity-name="Uom" description="${description} [${abbreviation}]"/></field>
        <field name="meterValue" title="${uiLabelMap.AccountingFixedAssetMeterValue}"><text/></field>
        <!-- <field name="maintHistSeqId" title="${uiLabelMap.AccountingFixedAssetMaint}">
            <hyperlink target="EditFixedAssetMaint" description="${maintHistSeqId}" also-hidden="false">
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="maintHistSeqId"/>
            </hyperlink>
        </field> -->
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-mini btn-success"><submit button-type="button"/></field>
        <!-- <field name="updateButton" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-success" event="onclick" action="javascript:void(0);document.UpdateInvoiceItems_o_${itemIndex}.submit()">
           <hyperlink description="${uiLabelMap.CommonUpdate}" target="updateProductionRunFixedAssetMeter" also-hidden="false">
               <parameter param-name="fixedAssetId"/>
               <parameter param-name="productMeterTypeId"/>
               <parameter param-name="readingDate"/>
               <parameter param-name="maintHistSeqId"/>
               <parameter param-name="productionRunId"/>
           </hyperlink>
       </field> -->
        <field name="deleteLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="btn btn-mini btn-danger">
            <hyperlink description="${uiLabelMap.CommonRemove}" target="deleteProductionRunFixedAssetMeter" also-hidden="false">
                <parameter param-name="fixedAssetId"/>
                <parameter param-name="productMeterTypeId"/>
                <parameter param-name="readingDate"/>
                <!-- <parameter param-name="maintHistSeqId"/> -->
                <parameter param-name="productionRunId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- <form name="AddProductionRunTaskStoppage" type="single" target="" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <field name="productionRunId"><hidden /></field>
        <field name="fromTime" title="Stoppage ${uiLabelMap.ManufacturingFromDate}" position="1">
            <date-time/>
        </field>
        <field name="toTime" title="Stoppage ${uiLabelMap.ManufacturingToDate}" position="2">
            <date-time/>
        </field>
        <field name="dateTime" position="1">
            <date-time/>
        </field>
        <field name="routingTaskId" title="${uiLabelMap.ManufacturingRoutingTaskId}" position="2">
            <lookup target-form-name="LookupRoutingTask"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-success">
            <submit button-type="button"/>
        </field>
    </form>
    
    <form name="ListProductionRunTaskStoppages" list-entry-name="" title="" type="list" paginate-target=""
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" paginate-size-field="10" view-size="10" >
        <field name="productionRunId"><hidden /></field>
        <field name="fromTime" title="Stoppage ${uiLabelMap.ManufacturingFromDate}">
            <display/>
        </field>
        <field name="toTime" title="Stoppage ${uiLabelMap.ManufacturingToDate}">
            <display/>
        </field>
        <field name="dateTime" position="1">
            <display/>
        </field>
        <field name="routingTaskId" title="${uiLabelMap.ManufacturingRoutingTaskId}">
            <lookup target-form-name="LookupRoutingTask"/>
        </field>
    </form> -->

    <!-- ******************* -->
    <!-- Shipment Plan Forms -->
    <!-- ******************* -->
    <!-- List for Shipment Plan -->
    <form name="listShipmentPlan" type="list" target="" title="" list-name="shipmentPlan"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="orderId" widget-style="buttontext">
            <hyperlink target="/ordermgr/control/orderview" target-type="inter-app" description="${orderId}">
                <parameter param-name="orderId" from-field="orderId"/>
            </hyperlink>
        </field>
        <field name="orderItemSeqId" title="${uiLabelMap.ProductOrderItem}"><display/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
        <!-- quantity planned in this shipment -->
        <field name="quantity" title="${uiLabelMap.ProductQuantity}"><display/></field>
        <!-- quantity issued in this shipment -->
        <field name="issuedQuantity"><display/></field>
        <!-- total ordered quantity -->
        <field name="totOrderedQuantity"><display/></field>
        <!-- total not available quantity -->
        <field name="notAvailableQuantity" title="${uiLabelMap.ProductNotAvailable}"><display/></field>
        <!-- total planned quantity not issued -->
        <field name="totPlannedQuantity"><display/></field>
        <!-- total issued quantity -->
        <field name="totIssuedQuantity"><display/></field>
        <field name="productionRunId" widget-style="buttontext">
            <hyperlink target="ShowProductionRun" description="${productionRunId}" also-hidden="false">
                <parameter param-name="productionRunId" from-field="productionRunId"/>
            </hyperlink>
        </field>
        <field name="productionRunStatusId"><display-entity entity-name="StatusItem" key-field-name="statusId"/></field>
        <field name="productionRunEstimatedCompletionDate"><display/></field>
        <field name="productionRunQuantityProduced"><display/></field>
    </form>

    <form name="listShipmentPlans" type="list" target="" title="" list-name="shipmentPlans"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" header-row-style="header-row-2">
        <field name="shipmentId" widget-style="buttontext" sort-field="true">
            <hyperlink target="/facility/control/ViewShipment" target-type="inter-app" description="${shipmentId}">
                <parameter param-name="shipmentId" from-field="shipmentId"/>
            </hyperlink>
        </field>
        <field name="statusId">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        <field name="estimatedShipDate" sort-field="true"><display/></field>
        <field name="viewShipmentPlanLink" title=" " widget-style="buttontext">
            <hyperlink target="WorkWithShipmentPlans" description="${uiLabelMap.CommonView}" also-hidden="false">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field>
    </form>
    <form name="SelectMrpName" type="single" target="ManufacturingReports" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <field name="mrpName"  title="${uiLabelMap.ManufacturingMrpName}"><text size="20"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="mandatoryWorkEfforts" type="list" target="" title="" list-name="mandatoryWorkEfforts"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="workEffortIdFrom" title=" " widget-style="buttontext">
            <hyperlink target="ShowProductionRun" description="${workEffortIdFrom}" also-hidden="false" link-type="anchor">
                <parameter param-name="productionRunId" from-field="workEffortIdFrom"/>
            </hyperlink>
        </field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingTaskName}" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} " cache="true"/>
        </field>
        <field name="quantityToProduce" title="${uiLabelMap.ManufacturingQuantityToProduce}" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${quantityToProduce} " cache="true"/>
        </field>
        <field name="quantityProduced" title="${uiLabelMap.ManufacturingQuantityProduced}" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${quantityProduced} " cache="true"/>
        </field>
        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingStartDate}" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${estimatedStartDate} " cache="true"/>
        </field>
        <field name="estimatedCompletionDate" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${estimatedCompletionDate} " cache="true"/>
        </field>
        <field name="actualStartDate" title="${uiLabelMap.CommonActualStartDate}" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${actualStartDate} " cache="true"/>
        </field>
        <field name="actualCompletionDate" title="${uiLabelMap.ManufacturingActualCompletionDate}" entry-name="workEffortIdFrom">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${actualCompletionDate} " cache="true"/>
        </field>
    </form>
    <form name="dependentWorkEfforts" type="list" target="" title="" list-name="dependentWorkEfforts"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="workEffortIdTo" title=" " widget-style="buttontext">
            <hyperlink target="ShowProductionRun" description="${workEffortIdTo}" also-hidden="false" link-type="anchor">
                <parameter param-name="productionRunId" from-field="workEffortIdTo"/>
            </hyperlink>
        </field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingTaskName}" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${workEffortName} " cache="true"/>
        </field>
        <field name="quantityToProduce" title="${uiLabelMap.ManufacturingQuantityToProduce}" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${quantityToProduce} " cache="true"/>
        </field>
        <field name="quantityProduced" title="${uiLabelMap.ManufacturingQuantityProduced}" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${quantityProduced} " cache="true"/>
        </field>
        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingStartDate}" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${estimatedStartDate} " cache="true"/>
        </field>
        <field name="estimatedCompletionDate" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${estimatedCompletionDate} " cache="true"/>
        </field>
        <field name="actualStartDate" title="${uiLabelMap.CommonActualStartDate}" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${actualStartDate} " cache="true"/>
        </field>
        <field name="actualCompletionDate" title="${uiLabelMap.ManufacturingActualCompletionDate}" entry-name="workEffortIdTo">
            <display-entity entity-name="WorkEffort" key-field-name="workEffortId" description="${actualCompletionDate} " cache="true"/>
        </field>
    </form>
    <form name="ProductionRunTaskCosts" type="list" target="" title="" list-name="taskCosts"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <auto-fields-entity entity-name="CostComponent" default-field-type="display"/>
        <field name="workEffortId"><hidden/></field>
        <field name="productId"><hidden/></field>
        <field name="partyId"><hidden/></field>
        <field name="geoId"><hidden/></field>
        <field name="productFeatureId"><hidden/></field>
        <field name="costComponentTypeId">
            <display-entity entity-name="CostComponentType"/>
        </field>
        <field name="costComponentCalcId">
            <display-entity entity-name="CostComponentCalc"/>
        </field>
    </form>
    <form name="AddProductionRunComponent" type="single" target="addProductionRunComponent" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="addProductionRunComponent"/>
        <field name="productionRunId"><hidden/></field>
        <field name="workEffortId" title="${uiLabelMap.ManufacturingRoutingTask}">
            <drop-down allow-empty="false">
                <entity-options entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]">
                    <entity-constraint name="workEffortParentId" env-name="productionRunId"/>
                    <entity-order-by field-name="workEffortId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="productId">
            <lookup target-form-name="LookupProduct"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success"><submit button-type="button"/></field>
    </form>
    <form name="ProductionRunTaskComponents" type="list" target="updateProductionRunComponent" paginate-target="ProductionRunComponents" title="" list-name="records"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="productId"><display/></field>
        <field name="internalName" entry-name="productId" title="${uiLabelMap.ProductInternalName}">
            <display-entity entity-name="Product" key-field-name="productId" description="${internalName}"/>
        </field>
        <field name="workEffortId"><hidden/></field>
        <field name="productionRunId"><hidden/></field>
        <field name="estimatedQuantity"><text/></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-success"><submit button-type="button"/></field>
        <field name="deleteLink" title=" " widget-style="btn btn-mini">
            <hyperlink target="deleteProductionRunComponent"  description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="workEffortId"/>
                <parameter param-name="fromDate"/>
                <parameter param-name="productId"/>
                <parameter param-name="workEffortGoodStdTypeId"/>
                <parameter param-name="productionRunId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ProductionRunTaskActualComponents" type="list" target="updateProductionRunComponent" paginate-target="ProductionRunActualComponents" title="" list-name="records"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <row-actions>
            <set field="quantityOnHandDiff" value="${groovy:-1*quantityOnHandDiff}" type="BigDecimal"/>
        </row-actions>
        <field name="inventoryItemId" widget-style="buttontext">
            <hyperlink target="/facility/control/EditInventoryItem" description="${inventoryItemId}" also-hidden="false" target-type="inter-app">
                <parameter param-name="inventoryItemId"/>
            </hyperlink>
        </field>
        <field name="productId" entry-name="inventoryItemId">
            <display-entity entity-name="InventoryItemAndLocation" key-field-name="inventoryItemId" description="${internalName} [${productId}]"/>
        </field>
        <field name="workEffortId"><hidden/></field>
        <field name="productionRunId"><hidden/></field>
        <field name="quantityOnHandDiff" title="${uiLabelMap.CommonQuantity}"><display/></field>
        <field name="unitCost" entry-name="inventoryItemId">
            <display-entity entity-name="InventoryItem" key-field-name="inventoryItemId" description="${unitCost}"/>
        </field>
        <field name="reasonEnumId">
            <display-entity entity-name="Enumeration" key-field-name="enumId" description="${description}"/>
        </field>
        <field name="description"><display/></field>
    </form>
    <form name="IssueProductionRunComponent" type="single" target="issueProductionRunTaskComponent" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="issueProductionRunTaskComponent"/>
        <field name="productionRunId"><hidden/></field>
        <field name="fromDate"><ignored/></field>
        <field name="reserveOrderEnumId"><ignored/></field>
        <field name="workEffortId" title="${uiLabelMap.ManufacturingTaskId}">
            <drop-down allow-empty="false">
                <entity-options entity-name="WorkEffort" description="${workEffortName} [${workEffortId}]">
                    <entity-constraint name="workEffortParentId" env-name="productionRunId"/>
                    <entity-order-by field-name="workEffortId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="productId">
            <lookup target-form-name="LookupProduct"/>
        </field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}">
            <text />
        </field>
        <field name="reasonEnumId">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" key-field-name="enumId" description="${description}">
                    <entity-constraint name="enumTypeId" value="IID_REASON"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="description"><text/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-success"><submit button-type="button"/></field>
    </form>

    <!--Portlet -->
    <form name="listPortletProductionRun" list-name="productionRunList" title="" type="list" paginate-target="/main"
          odd-row-style="alternate-row" default-table-style="basic-table hover-bar" paginate-size-field="10" view-size="10" >

        <field name="facilityName" title="${uiLabelMap.ProductFacility}">
            <display/>
        </field>
        <field name="workEffortName" title="${uiLabelMap.ManufacturingProductionRunName}"><display/></field>
        <field name="internalName" title="${uiLabelMap.ManufacturingFinishedGood}">
            <display/>
        </field>
        <field name="estimatedStartDate" title="${uiLabelMap.ManufacturingStartDateTime}"><display/></field>
        <field name="estimatedQuantity" title="${uiLabelMap.ManufacturingQuantity}">
            <display description="${estimatedQuantity} ${abbreviation}"></display>
        </field>

        <field name="workEffortId" title="${uiLabelMap.CommonAction}" widget-style="btn btn-mini">
            <hyperlink target="ShowProductionRun" description="View" also-hidden="false">
                <parameter param-name="productionRunId" from-field="workEffortId"/>
            </hyperlink>
        </field>
    </form>

    <form name="listPendingOrderReq" type="list" title="" list-name="requirementsList"
          odd-row-style="alternate-row" default-table-style="basic-table hover-bar"  view-size="10">

        <field name="requirementId" title="Requirement Id"  widget-style="btn btn-mini">
            <hyperlink target-type="inter-app" target="/ordermgr/control/EditRequirement" description="${requirementId}">
                <parameter param-name="requirementId" value="${requirementId}"/>
            </hyperlink>
        </field>
        <field name="requirementTypeId" title="Requirement Type">
            <display-entity entity-name="RequirementType" description="${description}"  key-field-name="requirementTypeId" >
            </display-entity>
        </field>
        <field name="internalName" title="Product">
            <display/>
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.ManufacturingStartDateTime}">
            <display  also-hidden="false"/>
        </field>
        <field name="quantity" title="Quantity">
            <display description="${quantity} ${abbreviation}"/>
        </field>
        <field name="OrdersLink" title="Orders Link" widget-style="btn btn-mini">
            <hyperlink target-type="inter-app" target="/ordermgr/control/ListRequirementOrders" description="${requirementId}"  >
                <parameter param-name="requirementId" value="${requirementId}"/>
            </hyperlink>
        </field>
    </form>

    <form name="ListProductsGenAsScrap" type="list" title="" list-name="scrapProductList"
          odd-row-style="alternate-row" default-table-style="basic-table hover-bar" view-size="10" >

        <field name="finishedGdId" title="${uiLabelMap.ManufacturingFinishedGood}"  widget-style="btn btn-mini">
            <display-entity entity-name="Product" description="${internalName}"  key-field-name="productId" >

            </display-entity>
        </field>
        <field name="finishedGdQuantity" title="${uiLabelMap.ManufacturingManufacturedQuantity}">
            <display/>
        </field>
        <field name="pdInternalName" title="${uiLabelMap.ManufacturingScrapProduct}">
            <display/>
        </field>
        <field name="onHandTotal" title="${uiLabelMap.ManufacturingScrapQuantity}">
            <display description="${quantityOnHandTotal} ${abbreviation}" also-hidden="false"/>
        </field>
        <field name="finishedGdIdName" title="${uiLabelMap.CommonAction}"  widget-style="btn btn-mini">
            <hyperlink target="FindProductionRun" description="View Runs">
                <parameter param-name="productId" value="${finishedGdId}"/>
            </hyperlink>
        </field>
    </form>

    <form name="ListOfBestMarginProds" type="list" title="" list-name="prodsSoldWithbestMargin"
          odd-row-style="alternate-row" default-table-style="basic-table hover-bar"  view-size="5">

        <field name="productId" title="${uiLabelMap.ManufacturingFinishedGood}"  widget-style="btn btn-mini">
            <display-entity entity-name="Product" description="${internalName}"  key-field-name="productId" >
            </display-entity>
        </field>
        <field name="avgSalePrice" title="${uiLabelMap.ManufacturingAvgSalePrice}" widget-style="amountColDisplay">
            <display also-hidden="false"/>
        </field>
        <field name="avgMfgCost" title="${uiLabelMap.ManufacturingAvgMnfCost}" widget-style="amountColDisplay">
            <display  also-hidden="false" />
        </field>
        <field name="maginValue" title="${uiLabelMap.ManufacturingMarginInPercentage}">
            <display/>
        </field>
        <field name="jobRunsLink" title="${uiLabelMap.CommonAction}"  widget-style="btn btn-mini">
            <hyperlink target="FindProductionRun" description="View Runs">
                <parameter param-name="productId" value="${productId}"/>
            </hyperlink>
        </field>
    </form>


    <form name="manuFacturingPref" type="single" target="createManufacturingPreference" default-map-name="partyMenufacturerUnit" header-row-style="header-row"
          default-table-style="basic-table">
        <alt-target use-when="partyMenufacturerUnit!=null" target="updateManufacturingPreference" />
        <field name="partyId">
            <display also-hidden="true" description="${parameters.organizationPartyId}" />
        </field>

        <field name="unitMailingName">
            <text />
        </field>
        <field name="exciseRegistrationNo">
            <text />
        </field>
        <field name="registrationDate">
            <date-time />
        </field>
        <field name="menufacturerType">
            <drop-down allow-empty="false">
                <option key="REGULAR" description="Regular" />
                <option key="SMALL_SCALE_IND" description="Small Scale Industries(SSI)" />
            </drop-down>
        </field>
        <field name="ltuCode" title="Large tax payer unit">
            <text />
        </field>

        <field name="rangeCode" position="1" title="Range Code">
            <text />
        </field>
        <field name="rangeName" position="2" title="Range Name">
            <text />
        </field>
        <field name="rangeAddress" position="3" title="Range Address">
            <text />
        </field>

        <field name="divisionCode" position="1" title="Division Code">
            <text />
        </field>
        <field name="divisionName" position="2" title="Division Name">
            <text />
        </field>
        <field name="divisionAddress" position="3" title="Division Address">
            <text />
        </field>

        <field name="commissionerateCode" position="1" title="Commissionerate Code">
            <text />
        </field>
        <field name="commissionerateName" position="2" title="Commissionerate Name">
            <text />
        </field>
        <field name="commissionerateAddress" position="3" title="Commissionerate Address">
            <text />
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-success" use-when="partyMenufacturerUnit!=null">
            <submit button-type="button" />
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-success" use-when="partyMenufacturerUnit==null">
            <submit button-type="button" />
        </field>
    </form>
</forms>

